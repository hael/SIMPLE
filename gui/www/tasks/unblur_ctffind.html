<div class=jobheader>
	Unblur and CTFFIND
	<img class=jobclose src=close.png onclick='document.getElementById("job").style.display = "none"; document.getElementById("gauze").style.display = "none"'>
</div>

<div class=jobdescription>
	Motion correct movies and calculate CTF parameters
</div>

<div class=jobworkflow id=0>
	<div class=jobworkflowheader>Description</div>
	<div class=jobworkflowheader>Arguments</div>
	<div class=jobworkflowheader>Run</div>
</div>

<div class=jobworkflowpage>
	<input class=jobarg type=hidden id=cmd value=simplejob>
	<input class=jobarg type=hidden id=taskname value=unblur_ctffindjob>
	<input class=jobarg type=hidden id=prg value=unblur_ctffind>
	<input class=jobarg type=hidden id=jobtype value=unblur_ctffind>
	<div class=jobcolumnrow>
		<div class=jobargname>Job Name</div>
		<input class=jobarg type=text id=jobname>
	</div>	
	<div class=jobcolumnrow>	
		<div class=jobargname>Job Description</div>
		<textarea rows=6 cols=50 class=jobarg type=text id=jobdescription></textarea>
	</div>
</div>

<div class=jobworkflowpage>
	<div class=jobcolumnrow>
		<div class=jobargname>Input STAR File</div>
		<input class="jobarg jobargrequired" type=text id=starfile>
		<img src=folder.png onclick='fileSelector("file", "starfile");'>
	</div>	
	<div class=jobcolumnrow>
		<div class=jobargname>Sampling Distance</div>
		<input class="jobarg jobargrequired" type=text id=smpd>
	</div>
	<div class=jobcolumnrow>
		<div class=jobargname>Spherical Aberration</div>
		<input class="jobarg jobargrequired" type=text id=cs>
	</div>
	<div class=jobcolumnrow>
		<div class=jobargname>Fraction Of Amplitude Contrast</div>
		<input class="jobarg jobargrequired" type=text id=fraca>
	</div>	
	<div class=jobcolumnrow>
		<div class=jobargname>Acceleration Voltage</div>
		<select class="jobarg jobargrequired" id=kv onchange="var kvselect = document.getElementsByClassName('kvselect');
															for(var i = 0; i < kvselect.length; i++){
																if(this.options[this.selectedIndex].value == 300){
																	kvselect[i].style.display = 'block';
																} else {
																	kvselect[i].style.display = 'none';
																}
															}";
		>
			<option value=120>120 kV</option>
			<option value=200>200 kV</option>
			<option value=300 selected>300 kV</option>
		</select>
	</div>
	<div class="jobcolumnrow kvselect">
		<div class=jobargname >Dose Rate</div>
		<input class=jobarg type=text id=dose_rate>
	</div>
	<div class="jobcolumnrow kvselect">
		<div class=jobargname>Exposure Time</div>
		<input class=jobarg type=text id=exp_time>
	</div>

	<div class=jobcolumnoptional>
		<div class=jobcolumnoptionaltitle onclick="var jobargoptional = document.getElementsByClassName('jobargoptional');
														for(var i = 0; i < jobargoptional.length; i++){
															if(jobargoptional[i].style.display == 'block'){
																jobargoptional[i].style.display = 'none';
															}else{
																jobargoptional[i].style.display = 'block';
															}
														}";>
			Optional Arguments
		</div>
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Output File Body</div>
			<input class=jobarg type=text id=fbody>
		</div>	
	
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Starting Low Pass Limit (A)</div>
			<input class=jobarg type=text id=lpstart value=15>
		</div>
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Stop Low Pass Limit (A)</div>
			<input class=jobarg type=text id=lpstop value=8>
		</div>
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Maximum Halfwidth Shift (px)</div>
			<input class=jobarg type=text id=trs>
		</div>
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Power Spectrum Size (px)</div>
			<input class=jobarg type=text id=pspecsz>
		</div>
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Length Of Number String</div>
			<input class=jobarg type=text id=numlen>
		</div>
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Starting Iteration</div>
			<input class=jobarg type=text id=startit>
		</div>
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Image Scale Factor</div>
			<input class=jobarg type=text id=scale>
		</div>
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Number Frames To Group</div>
			<input class=jobarg type=text id=nframesgrp value=0>
		</div>
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Tomography Mode</div>
			<select class=jobarg id=tomo>
				<option value=yes>yes</option>
				<option value=no selected>no</option>
			</select>
		</div>
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Starting Frame Index</div>
			<input class=jobarg type=text id=fromf>
		</div>	
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Final Frame Index</div>
			<input class=jobarg type=text id=tof>
		</div>	
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Number Sigmas</div>
			<input class=jobarg type=text id=nsig>
		</div>	
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Output Filename</div>
			<input class=jobarg type=text id=outfile>
		</div>

		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>High Pass Limit (A)</div>
			<input class=jobarg type=text id=hp>
		</div>
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Low Pass Limit (A)</div>
			<input class=jobarg type=text id=lp>
		</div>
		
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Minimum Expected Defocus (uM)</div>
			<input class=jobarg type=text id=dfmin>
		</div>	
			
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Maximum Expected Defocus (uM)</div>
			<input class=jobarg type=text id=dfmax>
		</div>
			
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Astigmatism Search Step Size</div>
			<input class=jobarg type=text id=astigstep>
		</div>
			
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Expected Astigmatism (uM)</div>
			<input class=jobarg type=text id=expastig>
		</div>
			
		<div class="jobcolumnrow jobargoptional">
			<div class=jobargname>Phaseplate</div>
			<select class=jobarg id=phaseplate>
				<option value=yes>yes</option>
				<option value=no selected>no</option>
			</select>
		</div>
	</div>
</div>

<div class=jobworkflowpage>
	<div class=jobcolumnrow>
		<div class=jobargname>Distribute</div>	
		<input class=jobarg type=checkbox id=exec value=simple_exec onchange="if(this.checked){ 
																				this.value = 'simple_distr_exec';
																				var distr = parentElement.parentElement.getElementsByClassName('distr');
																				for(var i = 0; i < distr.length; i++){
																						distr[i].style.display = 'block';
																				}
																				var nondistr = parentElement.parentElement.getElementsByClassName('nondistr');
																				for(var i = 0; i < nondistr.length; i++){
																						nondistr[i].style.display = 'none';
																				}
																			  }else{
																				this.value = 'simple_exec';
																				var distr = parentElement.parentElement.getElementsByClassName('distr');
																				for(var i = 0; i < distr.length; i++){
																						distr[i].style.display = 'none';
																				}
																				var nondistr = parentElement.parentElement.getElementsByClassName('nondistr');
																				for(var i = 0; i < nondistr.length; i++){
																						nondistr[i].style.display = 'block';
																				}
																			  }";
		>
	</div>
	
	<div class="jobcolumnrow">
		<div class=jobargname>Number Threads</div>
		<input class=jobarg type=text id=nthr>
	</div>
	
	<div class="jobcolumnrow distr">
		<div class=jobargname>Number Parts</div>
		<input class=jobarg type=text id=nparts>
	</div>
	
	<div class="jobcolumnrow distr">
		<div class=jobargname>Number Of Compute Units</div>
		<input class=jobarg type=text id=ncunits>
	</div>
	
	<div class="jobcolumnrow distr">
		<div class=jobargname>Scheduler</div>
		<select class=jobarg id=qsys_name>
			<option value=slurm>slurm</option>
			<option value=pbs>pbs</option>
			<option value=sge>sge</option>
			<option value=local selected>local</option>
		</select>
	</div>
		
</div>

<div class=jobworkflowbuttons>
	<div class=newjobbutton onclick='jobWorkflowBack(this)'>Back</div>
	<div class=newjobbutton onclick='jobWorkflowNext(this)'>Next</div>
</div>
