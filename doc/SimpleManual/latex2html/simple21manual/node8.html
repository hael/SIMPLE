<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Compiling SIMPLE from source on a Linux PC</TITLE>
<META NAME="description" CONTENT="Compiling SIMPLE from source on a Linux PC">
<META NAME="keywords" CONTENT="simple21manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="simple21manual.css">

<LINK REL="next" HREF="node9.html">
<LINK REL="previous" HREF="node7.html">
<LINK REL="up" HREF="node7.html">
<LINK REL="next" HREF="node9.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html187"
  HREF="node9.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/sw/share/lib/latex2html/icons/next.png"></A> 
<A NAME="tex2html183"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/sw/share/lib/latex2html/icons/up.png"></A> 
<A NAME="tex2html177"
  HREF="node7.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/sw/share/lib/latex2html/icons/prev.png"></A> 
<A NAME="tex2html185"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="file:/sw/share/lib/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html188"
  HREF="node9.html">Compiling SIMPLE from source</A>
<B> Up:</B> <A NAME="tex2html184"
  HREF="node7.html">Installation</A>
<B> Previous:</B> <A NAME="tex2html178"
  HREF="node7.html">Installation</A>
 &nbsp; <B>  <A NAME="tex2html186"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00051000000000000000"></A>
<A NAME="compilepc"></A>
<BR>
Compiling SIMPLE from source on a Linux PC
</H2>

<P>
Here we will compile SIMPLE2.1 from source on a Linux PC. The manual states that  SIMPLE2.1 requires the GNU toolchain version 4.9.1 or later (see above). Although SIMPLE supports all newer versions of the GNU toolchain, it is safest to use version 4.9.X because later versions are currently incompatible with the CUDA7 compiler. GPU accelerated code is planned for SIMPLE v3 and it may not be supported unless 4.9.X is used. To check the compiler versions, we execute
<PRE>
    $ gfortran --version
    GNU Fortran (GCC) 4.9.1
    Copyright (C) 2014 Free Software Foundation, Inc.
</PRE>
To confirm that the gcc and g++ compilers are of the same version, we execute
<PRE>
    $ gcc --version
    gcc (GCC) 4.9.1
    Copyright (C) 2014 Free Software Foundation, Inc.
    This is free software; see the source for copying conditions.  There is NO
    warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</PRE>
<PRE>
    $ g++ --version
    g++ (GCC) 4.9.1
    Copyright (C) 2014 Free Software Foundation, Inc.
    This is free software; see the source for copying conditions.  There is NO
    warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</PRE>
To check whether lapack is installed, we open the package manager installed on our system (in our case <TT>Synaptic</TT> but other systems may have others, such as <TT>YaST</TT>, <TT>apt</TT> etc.) and search for <TT>lapack</TT> and conclude that <TT>liblapack3</TT> is installed on the system. We also search for <TT>fftw</TT> and conclude that the <TT>libfftw3-single-3</TT> is installed on the system. We cd to the directory  where we have our software installed (<TT>&lt;my software location&gt;</TT>) and copy the tar ball there
<PRE>
    $ cd &lt;my software location&gt;
    $ cp ~/Downloads/simple2.1.tar.gz .
</PRE>
Next, we unpack the tar ball and cd to the simple directory
<PRE>
    $ gunzip simple2.1.tar.gz
    $ tar -xvf simple2.1.tar
    $ cd simple2.1/
</PRE>
To check which Linux distribution we are running, we execute
<PRE>
    $ lsb_release -a
    No LSB modules are available.
    Distributor ID: Ubuntu
    Description:    Ubuntu 15.10
    Release:    15.10
    Codename:   wily
</PRE>
Now we try to identify the configuration template file most suitable for our system by executing
<PRE>
    $ ls -1 scripts/Template_*
    scripts/Template_FEDORA_21x64_CPU_simple_user_input.pm
    scripts/Template_MacOSX_10.9.5x64_CPU_simple_user_input.pm
    scripts/Template_MacOSXFINK_10.11.4x64_CPU_simple_user_input.pm
    scripts/Template_MASSIVE_CPU_simple_user_input.pm
    scripts/Template_Mint_17.1x64_CPU_simple_user_input.pm
    scripts/Template_OXFORD_CPU_simple_user_input.pm
    scripts/Template_SUSE_13.2x64_CPU_simple_user_input.pm
    scripts/Template_Ubuntu_14.10x64_CPU_simple_user_input.pm
    scripts/Template_Ubuntu_15.10x64_CPU_simple_user_input.pm
    scripts/Template_Ubuntu_16.XXx64_CPU_simple_user_input.pm
</PRE>

<P>
For this system, it looks like the <TT>Template_Ubuntu_15.10x64_CPU_simple_user_input.pm</TT> is the best fit, so we copy it to the root of the SIMPLE directory and rename it by executing
<PRE>
    $ cp ./scripts/Template_Ubuntu_15.10x64_CPU_simple_user_input.pm
    simple_user_input.pm
</PRE>

<P>
We open the <TT>simple_user_input.pm</TT> file in our favourite text editor (vim) and replace on line 30 <TT>our$SIMPLE_PATH<IMG
 WIDTH="18" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img2.png"
 ALT="$ =$">
"/mysimplepath/"</TT> with <TT>our$SIMPLE_PATH<IMG
 WIDTH="18" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img2.png"
 ALT="$ =$">
"/home/hael/software/simple2.1/"</TT>. This is the path in which the software will be installed. We close vim and execute
<PRE>
    $ ./Makefile_genAll.pl
    SIMPLE library has finished compilation in dir:
    /Users/hael/src/fortran/simple_wfrederic/Simple_Restruct.projet
    *********************************************************
    * Compilation and linkage is complete for Simple-v2.1   *
    * You may run all simple checks  --- List check options *
    * &gt; make check                   --- &gt; make check_help  *
    *                                --- &gt; make check_cpu   *
    * Cleaners: --- &gt; make {clean,cleanall,clean_check_cpu} *
    * New Rel.: --- &gt; make checknews                        *
    * Lne Cntr: --- &gt; make wc                               *
    *********************************************************
</PRE>

<P>
Compilation was succesful and we see that a new directory <TT>/bin</TT> has been created in the simple directory in addition to two text files <TT>add2.bashrc</TT> and <TT>add2.tcshrc</TT>
<PRE>
    $ cat add2.bashrc
    export SIMPLEPATH=/home/hael/src/simple
    export PATH=${SIMPLEPATH}/scripts:${SIMPLEPATH}/$PATH
    $ cat add2.tcshrc
    setenv SIMPLEPATH /home/hael/src/simple
    set path=(${SIMPLEPATH}/scripts ${SIMPLEPATH}/bin $path)
</PRE>

<P>
On this machine we use the bash shell, so we add the lines in <TT>add2.bashrc</TT> to the <TT>.bashrc</TT> file and when a new terminal window is opened we have access to all the <TT>simple_*</TT> programs.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html187"
  HREF="node9.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/sw/share/lib/latex2html/icons/next.png"></A> 
<A NAME="tex2html183"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/sw/share/lib/latex2html/icons/up.png"></A> 
<A NAME="tex2html177"
  HREF="node7.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/sw/share/lib/latex2html/icons/prev.png"></A> 
<A NAME="tex2html185"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="file:/sw/share/lib/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html188"
  HREF="node9.html">Compiling SIMPLE from source</A>
<B> Up:</B> <A NAME="tex2html184"
  HREF="node7.html">Installation</A>
<B> Previous:</B> <A NAME="tex2html178"
  HREF="node7.html">Installation</A>
 &nbsp; <B>  <A NAME="tex2html186"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Hans Elmlund
2016-05-24
</ADDRESS>
</BODY>
</HTML>
